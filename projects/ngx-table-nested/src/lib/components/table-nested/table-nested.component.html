<link rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"/>
<ng-container *ngIf="dataTable.length > 0">
  <ngx-datatable #treeTable
                 [ngClass]="{
                 'dark': this.theme === tableTheme.dark,
                 'bootstrap': this.theme === tableTheme.light
               }"
                 [rows]="dataTable"
                 [columnMode]="columnMode.flex"
                 [headerHeight]="tableRowHeight"
                 [footerHeight]="tableFooterHeight"
                 [rowHeight]="tableRowHeight"
                 [scrollbarV]="false"
                 [sortType]="sortType.single"
                 [limit]="limit"
  >
    <ngx-datatable-row-detail [rowHeight]="getDetailHeight()" class="p-3">
      <ng-template let-row="row" ngx-datatable-row-detail-template>
        <ngx-table-basic [rows]="row[childrenKey]" [columns]="childrenColumns" [limit]="childrenLimit" [actionConfig]="childrenActionConfig"/>
      </ng-template>
    </ngx-datatable-row-detail>
    <ngx-datatable-column
      [width]="iconColumnWidth"
      [resizeable]="false"
      [sortable]="false"
      [draggable]="false"
      [canAutoResize]="false"
      cellClass="icon_content_cell"
      [cellTemplate]="iconCollapse"
    />
    <ng-container>
      <ngx-datatable-column *ngFor="let item  of columns" [name]="item.name" [prop]="item.keyValue" [resizeable]="false"
                            [flexGrow]="1"
                            [sortable]="!!item.sort"
                            headerClass="py-2"
                            cellClass="py-2">
        <ng-template let-column="column" ngx-datatable-header-template>
          <strong>{{ column.name }}</strong>
        </ng-template>
        <ng-template let-dataItem="row" ngx-datatable-cell-template>
          <span> {{ dataItem[item.keyValue] }}</span>
        </ng-template>
      </ngx-datatable-column>
      <ngx-datatable-column *ngIf="actionConfig.length > 0" name="'action'" prop="action"
                            [resizeable]="false" [flexGrow]="1"
                            [sortable]="false"
                            headerClass="py-2"
                            cellClass="no-p button-content">
        <ng-template ngx-datatable-header-template>
          <span></span>
        </ng-template>
        <ng-template let-dataItem="row" ngx-datatable-cell-template class="agregada_en_template">
          <!--        <ng-template [ngTemplateOutlet]="actionTemplate"></ng-template>-->
          <ng-container *ngFor="let action of actionConfig">
            <ngx-table-action [data]="action" [type]="actionType.icon" />
          </ng-container>
        </ng-template>
      </ngx-datatable-column>
    </ng-container>
  </ngx-datatable>
  <ng-template #iconCollapse let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
    <button class="op_button_icon" title="Expand/Collapse Row"
            [class.datatable-icon-right]="!expanded"
            [class.datatable-icon-down]="expanded"
            (click)="toggleExpandRow(row)">
    </button>
  </ng-template>
</ng-container>
